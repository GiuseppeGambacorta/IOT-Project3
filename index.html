<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>HMI</title>
    <style>
        html,
        body {
            height: 100%;
            /* Serve per il layout a tutta altezza */
        }

        body {
            min-height: 100vh;
            /* Il body occupa almeno tutta la finestra */
            display: flex;
            /* Flexbox verticale */
            flex-direction: column;
            /* Colonna: header, main, footer */
        }

        main {
            flex: 1;
            /* Il main si espande per occupare lo spazio disponibile tra header e footer */
        }

        .manual-control {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .manual-control .button-row {
            display: flex;
            gap: 1rem;
        }

        .manual-control .button-top {
            margin-bottom: 1rem;
        }

        header {
            background-color: #0a3d62;
            color: #fff;
            margin-bottom: 0rem;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            padding-right: 1rem;
            padding-left: 1rem;
        }

        header nav ul li {
            padding-top: 0.7rem;
            padding-bottom: 0.7rem;
        }

        header a,
        header strong {
            color: #fff !important;
        }

        footer {
            background-color: #0a3d62;
            color: #fff;
            text-align: center;
            padding: 0rem 1rem;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            margin-top: 0rem;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
        }

    .alarm-control-footer button {
        font-size: 1rem;      
        padding: 0.0rem 0.5rem;  /* Riduce lo spazio interno */
        height: 2.2rem;          /* Altezza minore */
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
    }
        
        #tempChart {
            width: 100%;
            height: 25vh !important;
            margin: auto;
            display: block;
        }

        section h2 {
            text-align: center;
        }
    </style>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><strong>IOT Progetto 3</strong></li>
            </ul>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Stato</a></li>
                <li><a href="#">Impostazioni</a></li>
            </ul>
        </nav>
    </header>

    <main>

        <section>
            <h2>Andamento Temperatura</h2>
            <canvas id="tempChart"></canvas>
        </section>


        <section>
            <h2>Stato Sistema</h2>
            <ul>
                <li>Temperatura attuale: <span id="temp-current">--</span> °C</li>
                <li>Temperatura max: <span id="temp-max">--</span> °C</li>
                <li>Temperatura min: <span id="temp-min">--</span> °C</li>
                <li>Stato sistema: <span id="system-state">NORMAL</span></li>
                <li>Apertura finestra: <span id="window-level">0</span>%</li>
            </ul>
        </section>

        <section>

            <div class="manual-control">
                <h2>Controllo Manuale Finestra</h2>
                <div class="button-top">
                    <button id="cambia-modalita">Modalita Manuale</button>
                </div>
                <div class="button-row">
                    <button id="open-window">Apri Finestra</button>
                    <button id="close-window">Chiudi Finestra</button>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <span class="footer-text">© 2025 IOT Progetto 3</span>
        <div class="alarm-control-footer">
            <button id="reset-alarm">Problema Risolto</button>
        </div>
    </footer>
</body>

</html>


<script>
    // Esempio dati fittizi
    const labels = Array.from({ length: 10 }, (_, i) => `T${i + 1}`);
    const data = {
        labels: labels,
        datasets: [{
            label: 'Temperatura (°C)',
            data: [22, 23, 24, 25, 24, 23, 22, 21, 22, 23], // Sostituisci con i tuoi dati
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1
        }]
    };

    const config = {
        type: 'line',
        data: data,
        options: {
            responsive: true,
            smaintainAspectRatio: false,
            plugins: {
                legend: { display: false }
            }
        }
    };

    new Chart(
        document.getElementById('tempChart'),
        config
    );
</script>